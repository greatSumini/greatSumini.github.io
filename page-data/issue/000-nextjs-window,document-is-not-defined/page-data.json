{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/issue/000-nextjs-window,document-is-not-defined/",
    "result": {"data":{"site":{"siteMetadata":{"title":"최수민 개발 블로그","siteUrl":"https://sumini.dev"}},"markdownRemark":{"id":"19dc55b1-2383-513c-831b-13d8cb05492f","excerpt":"Next.js 개발환경에서 window object를 사용할 때, document is undefined, Cannot read innerWidth of undefined 등의 에러메세지를 마주할 때가 있다. Next.js…","html":"<p>Next.js 개발환경에서 window object를 사용할 때, <del>document is undefined</del>, <del>Cannot read innerWidth of undefined</del> 등의 에러메세지를 마주할 때가 있다.</p>\n<p>Next.js의 서버사이드 렌더링에 익숙하지 않을 때 자주하는 실수로, 서버에서 웹 페이지를 렌더링할 땐 window, document등의 object가 없기 때문에 발생한다!</p>\n<h3 id=\"솔루션\" style=\"position:relative;\"><a href=\"#%EC%86%94%EB%A3%A8%EC%85%98\" aria-label=\"솔루션 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>솔루션</h3>\n<p>Next.js는 universal 하다.</p>\n<p>즉, server-side에서 먼저 실행 되고, 그 후에 client-side에서 실행된다. <del>window</del>는 client-side에만 존재한다. 고로 React Component내에서 <del>window</del>를 사용하고 싶다면 componentDidMount내에 코드를 작성해야한다.</p>\n<p><code class=\"language-text\">next/dynamic</code>을 사용하는 것도 방법이다. 특정 조건에서만 import하도록 설정할 수 있으며, <code class=\"language-text\">ssr:false</code>처럼 지정할 수도 있다.</p>\n<ul>\n<li>\n<p>공식 문서 : <a href=\"https://nextjs.org/docs/advanced-features/dynamic-import\">next/dynamic</a></p>\n</li>\n<li>\n<p>외부 컴포넌트를 사용해야한다면 <a href=\"https://github.com/kadirahq/react-no-ssr\">react-no-ssr</a>를 고려해보자</p>\n</li>\n</ul>\n<h3 id=\"원글\" style=\"position:relative;\"><a href=\"#%EC%9B%90%EA%B8%80\" aria-label=\"원글 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원글</h3>\n<p>링크 : <a href=\"https://github.com/zeit/next.js/wiki/FAQ\">https://github.com/zeit/next.js/wiki/FAQ</a></p>\n<p>Next.js is <code class=\"language-text\">universal</code>, which means it executes code first server-side, then client-side.</p>\n<p>The window object is only present <code class=\"language-text\">client-side</code>, so if you absolutely need to have access to it in some React component, you should put that code in <code class=\"language-text\">componentDidMount</code>.</p>\n<p>This lifecycle method will only be executed on the client.</p>\n<p>You may also want to check if there isn’t some alternative universal library which may suit your needs.</p>\n<p>Alternatively, if you are aiming to render a component you can use <code class=\"language-text\">next/dynamic</code> to dynamically import modules.</p>\n<p>You can also set the flag to <code class=\"language-text\">ssr:false.</code></p>\n<p>NextJS added support for this in v3.0 <a href=\"https://zeit.co/blog/next3-preview\">https://zeit.co/blog/next3-preview</a></p>\n<p>If the simple fact of importing the library is enough to trigger the error, you’ll need to replace it with something like below</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> window <span class=\"token operator\">!==</span> <span class=\"token string\">'undefined'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'the-lib'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<br>\n<ul>\n<li>\n<p>For more info read this post: <a href=\"https://nextjs.org/docs/advanced-features/dynamic-import\">next/dynamic</a></p>\n</li>\n<li>\n<p>If you’re trying to use an external React component, also check <a href=\"https://github.com/kadirahq/react-no-ssr\">react-no-ssr</a>.</p>\n</li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"#%EC%86%94%EB%A3%A8%EC%85%98\">솔루션</a></li>\n<li><a href=\"#%EC%9B%90%EA%B8%80\">원글</a></li>\n</ul>","fields":{"slug":"/issue/000-nextjs-window,document-is-not-defined/"},"frontmatter":{"title":"Next.js \"window,document is not defined\" 해결하는 법","date":"2020-09-15T03:19:10.169Z","tags":["nextjs"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACQ0lEQVQoz3WO60tTARjG9wcJQkWWoTDnNJVuYlRqUKJtpWaKlRaESkSUn7pQH3IS3VDRlEwszWxqQcJc7na2c3a2nbWNqS2VnEydv3DqEqEPD8/Le/m9j8qdbWGnJM100qWsLam3XLNV79jZfa/a3Ugu5lqQj9qQ8614i+ybftqB94yQhCcfb0nU/PgPMGs6AfBfEFHKXPiKBfx6Ed9ZAW+xAylnE7YBcGnMuLUWfLkOgnniP+D2l2TCnI2EVrznBORSO1KRFfmEDeW4QOCklJgHtRLhbAkx08zk/jH6UrpR7Yy7oUSdPY1Ha0PRCoQKZGbyfYTVXjyZdqbSxjGmDuJSm3l1oI36vQ3o0iupLtRz86IO1XbcUJ6bwGExkVDJErCmTzKx7yOdKQYe7blD08Faag5VoC/Q0XypGafWzKcHg5j6rjPXW0t8qA6MDaicGVNM7v9CV8oLelJf41SbaUq7QW2+nqpTl6k/f5tbZS+5r5ug/UqQ5+Ur+L9DqMJJtGMBAsNg7Gep38Ti2E9UlWo91YVVXCu/SndLF3KBBceIREfjCm/KYKAeRlvgWyuYn4HTsMyiJ0aoQSZ0TyHSG0XUyogZDpQSJyp7nYlAtYto4wzI4DlmY+nDEsroLHPDX4l+NrDuMxIXo6wOBFgZCrOmRJl7EiRQ42a+K4wrzYSnVMCp86Gaf7uA/90f5NFlfimr+MsFZtvDYG1lve0Ia481xEfuEnGsY+uMMf5wDeNTiLyP4Cux89sWw2yIYemJI43DXzXFW2X56XKGAAAAAElFTkSuQmCC","aspectRatio":1.9867549668874172,"src":"/static/bbc016fa1685c64a2b61da4817186d6c/3225f/nextjs.png","srcSet":"/static/bbc016fa1685c64a2b61da4817186d6c/630fb/nextjs.png 300w,\n/static/bbc016fa1685c64a2b61da4817186d6c/2a4de/nextjs.png 600w,\n/static/bbc016fa1685c64a2b61da4817186d6c/3225f/nextjs.png 920w","sizes":"(max-width: 920px) 100vw, 920px"}}}}}},"pageContext":{"slug":"/issue/000-nextjs-window,document-is-not-defined/","previous":{"excerpt":"feature 브랜치에서 작업하던중 develop 브랜치에 새로운 변경 사항들이 생겼다. 확인해보니 두 브랜치에서 같은 app내의 모델을 수정해, 넘버링이 겹치는 문제가 생겼다. 😅 remote 브랜치의 migrations를 보존하면서 local…","fields":{"slug":"/guide/002-django-migration-rollback-regenerate/"},"frontmatter":{"date":"2020-09-15T02:27:10.169Z","title":"Django migration 롤백, 재생성 방법","layout":"post","thumbnail":{"childImageSharp":{"fluid":{"originalImg":"/static/ff30f46b8b7bd2e06ace543fcf0e41fc/8c781/0_conflict.png"}}}}},"next":{"excerpt":"상대 경로를 사용하면 package 구조가 깊어질 수록 파일 간의 관계를 파악하기 어려워지고, 파일 이동시 귀찮게 경로를 수정해야 합니다. 예시 절대 경로를 사용하면 depth…","fields":{"slug":"/guide/003-react-typescript-absolute-import/"},"frontmatter":{"date":"2020-09-18T03:03:10.169Z","title":"React+Typescript 절대경로 import 설정하기","layout":"post","thumbnail":{"childImageSharp":{"fluid":{"originalImg":"/static/6ea3d05c93d1e53241406845c25302ea/10bb3/ts-react.png"}}}}}}},
    "staticQueryHashes": ["1845200029","3000541721"]}
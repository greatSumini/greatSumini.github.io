{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/issue/001-react-native-android-release-fetch/",
    "result": {"data":{"site":{"siteMetadata":{"title":"최수민 개발 블로그","siteUrl":"https://sumini.dev"}},"markdownRemark":{"id":"3baa074b-90f8-59e7-ad35-c23f50b6e50e","excerpt":"오늘 SkyCloset의 Release버전을 처음으로 테스트해봤는데, SplashScreen에서 HomeScreen으로 화면전환이 되지 않았다. 원인을 살펴본 결과  함수에서 isLoaded state를 true로 업데이트 해주지 못하고 있었다. 2020/09/1…","html":"<p>오늘 <a href=\"https://github.com/greatSumini/skycloset_cli\">SkyCloset</a>의 Release버전을 처음으로 테스트해봤는데,</p>\n<p>SplashScreen에서 HomeScreen으로 화면전환이 되지 않았다.</p>\n<p>원인을 살펴본 결과 <code class=\"language-text\">_getWeather()</code> 함수에서 isLoaded state를 true로 업데이트 해주지 못하고 있었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetch_retry</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">http://openapi.airkorea.or.kr/openapi/services/rest/ArpltnInforInqireSvc/getMsrstnAcctoRltmMesureDnsty?stationName=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>json5<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>stationName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;dataTerm=daily&amp;ServiceKey=</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>airkoreaKey<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">&amp;ver=1.0&amp;_returnType=json</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>response6 <span class=\"token operator\">=></span> response6<span class=\"token punctuation\">.</span><span class=\"token function\">json</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>json6 <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span><span class=\"token function\">onSetDust</span><span class=\"token punctuation\">(</span>json6<span class=\"token punctuation\">.</span>list<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>isLoaded<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 작동 안 함!!</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<center>문제의 코드</center>\n<blockquote>\n<p>2020/09/19 추가 : 문제가 정말 많은 코드네요.. 😱</p>\n</blockquote>\n<br>\n<p>검색결과 <code class=\"language-text\">Android Pie부터 HTTP 연결이 막혔다</code>고한다!! <a href=\"https://github.com/facebook/react-native/issues/24408\">참고링크</a></p>\n<p>하지만 다행히도 수동으로 특정 URL에 대한 접근을 허용할 수 있다.</p>\n<p>​</p>\n<h2 id=\"특정-url에-대한-http-request-허용하는-법\" style=\"position:relative;\"><a href=\"#%ED%8A%B9%EC%A0%95-url%EC%97%90-%EB%8C%80%ED%95%9C-http-request-%ED%97%88%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B2%95\" aria-label=\"특정 url에 대한 http request 허용하는 법 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>특정 URL에 대한 HTTP request 허용하는 법</h2>\n<p><code class=\"language-text\">android/app/src/main/res/xml/network_security_config.xml</code> 파일을 다음과 같이 생성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>network-security-config</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>domain-config</span> <span class=\"token attr-name\">cleartextTrafficPermitted</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>domain</span> <span class=\"token attr-name\">includeSubdomains</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>insecure.example.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>domain</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>domain</span> <span class=\"token attr-name\">includeSubdomains</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>insecure.example2.com<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>domain</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>domain-config</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>network-security-config</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>(insecure.example.com 부분에 접속할 url을 입력하면된다.)</p>\n<br>\n<p><code class=\"language-text\">android/app/src/main/res/AndroidManifest.xml</code> 파일에 다음 코드를 추가해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>application</span>\n    <span class=\"token attr-name\">...</span>\n    <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>networkSecurityConfig</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>@xml/network_security_config<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"추가\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80\" aria-label=\"추가 permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가)</h3>\n<p>아래와 같은 방법으로 모든 url에 대한 http 접속을 허용할 수 있으나, 보안상의 이유로 추천하지 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>network-security-config</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>base-config</span> <span class=\"token attr-name\">cleartextTrafficPermitted</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>network-security-config</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h3 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor-header before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ref</h3>\n<ul>\n<li><a href=\"https://android-developers.googleblog.com/2018/04/protecting-users-with-tls-by-default-in.html\">Protecting users with TLS by default in Android P</a></li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%ED%8A%B9%EC%A0%95-url%EC%97%90-%EB%8C%80%ED%95%9C-http-request-%ED%97%88%EC%9A%A9%ED%95%98%EB%8A%94-%EB%B2%95\">특정 URL에 대한 HTTP request 허용하는 법</a></p>\n<ul>\n<li><a href=\"#%EC%B6%94%EA%B0%80\">추가)</a></li>\n<li><a href=\"#ref\">Ref</a></li>\n</ul>\n</li>\n</ul>","fields":{"slug":"/issue/001-react-native-android-release-fetch/"},"frontmatter":{"title":"[React Native] Android Release버전에서 fetch가 작동하지 않는 현상 (해결)","date":"2019-06-13T00:37:10.169Z","tags":["react-native"],"thumbnail":{"childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAADAElEQVQozy3OW09bBQDA8XPpOT2nPaentKUtBcptY9AhpkwozMEDA3VKoQUGZd3WSQli6KY0Ah2OS5SOkYUx14VtitEOcRpNFjXRxMRr4ovxwSef/A5+hL8x+AV++QkvBd+h17fCKXeek64cLUaOTvsyL+g3OasXaVUW8IlZnOIkupzGob6G5l3C5pxFtk0g2cYR5QSiOIQovIKQDN1iMLDBaW+BqHuBqLnIiHuXCatEr7JCg3EDK/4UR7SIJgyjymm00CqK9SaSnkHSLyKq5xHF+BGYrtklXlWkv3KNHk+BmGuVpK/EgKtIqztP8Ll7uBf/wOjaxVl5Bc2bQVEvobhyyJ43EF2zSPbU0fI/cLZuj1T1DvHATfp965yp2KDTfJsT1jXqnrlBsGUJa+IJ5pkSpn8aRySHZl5GMV9HDi4ieeaRtDSSnEQUhhDyjftMh+9zPnSbc/5N+rybdLgLnDDmaKyap7Yih3b4N/IP/2C+/ABH7zaamsbuzKJ4ryK7Z5CcF5CUJJI0hLDWfMDVhve5XPMeieAOg/479Hg26XSt0dpeorplm4rlnzGWfsTqvoM2/wsOa+YINbMoegrZPo5kG0GS4wi3I19w/ViZubpHpEN7jAQectZ3l2H9kGjiLzyrfxLu2SIUmKeyaQF3ZAmXPoVDS6MZF1G1MWxqAlkeRpLiCI/av6bY8oR800dkaz9kMlgm7i8zYN6nw7tLY+hd6o8XCLVdx2dksByTGMYlDO80uiuFXR9DsSexKf8PPzv1PaW2p6w3f8q1+jKZ6seMVR0wfHyfF5u2OB1cIlr9FpHwAm0nF4n0bdDQXcAKzeAwU+jqOHY5iSKNIItxhG9jv/I4+h07kS9ZOXbIXPhj0jUf8GrsgMzgJwx17/F8c5G+jiIDyXvEpvaIjW7hqc9iWFM4lHE0cRRVTGAThxF+6/2dr7p+Yv/Zb7jV+jmLTWVmwg8ZDe7Q79+mK7hFe2CdZv8yteEF/JE8noZZPP4ruM0LmOoEDnkMTRpFlRL8CzgsgaiqJtBMAAAAAElFTkSuQmCC","aspectRatio":1.7751479289940828,"src":"/static/631b10b28bb087e7c348edc654b52656/88e49/react-native.png","srcSet":"/static/631b10b28bb087e7c348edc654b52656/630fb/react-native.png 300w,\n/static/631b10b28bb087e7c348edc654b52656/88e49/react-native.png 525w","sizes":"(max-width: 525px) 100vw, 525px"}}}}}},"pageContext":{"slug":"/issue/001-react-native-android-release-fetch/","previous":null,"next":{"excerpt":"SkyCloset 릴리즈버전 테스트를 위해 를 입력했는데 아래 에러메세지와 함께 앱빌딩이 종료됐다. 에러내용 해결 구글링 결과 다음 방법으로 해결가능하다. 라이브러리를 추가해서 이 update 됐는데 가 check하지 못 했고, clean…","fields":{"slug":"/issue/002-react-native-android-release-execution-failed/"},"frontmatter":{"date":"2019-06-13T00:49:10.169Z","title":"[React Native] Failed to capture fingerprint of output files for task ':app:processDebugResources' property 'sourceOutputDir' (fixed)","layout":"post","thumbnail":{"childImageSharp":{"fluid":{"originalImg":"/static/631b10b28bb087e7c348edc654b52656/88e49/react-native.png"}}}}}}},
    "staticQueryHashes": ["1845200029","3000541721"]}